# Казка

## Запуск гри

Перед запуском гри створіть файл .env

Запустіть гру за допомогою

```
npm run dev
```

## Правила гри

### Хід гри

Перед грою гравці мають роздрукувати Картку персонажа. Перебіг подій у грі відбувається за допомогою ведучого гри, який відіграє за нейтральних створінь, босів, а також може підказувати, нагадувати правила гравцям і відповідальний за музику. Гравці опиняються в місті, де доля кожного з них залежатиме від власних дій. Гравці мають розвивати себе, та своїх істот, щоб ставати сильнішими та мати змогу перемагати. Гравці виконують дії за власним бажанням та рухаються з локації в локацію. Ходи робляться по колу, за годинниковою стрілкою. Кожні N хвилин гри змінюється час доби (ранок, день, вечір, ніч). Для виконання певних дій гравці мають кинути кубік Д20, щоб успішно виконати дію. Складність дії визначається правилами або ведучим. Для генерації рандомних значень, персонажів, вмінь, створінь, предметів, артефактів використовується телеграм бот.

### Основні поняття

- Кубік Д20 - серце гри "Казка", використовується для перевірки успішності дії.
- Золото - основна ігрова валюта, яка використовується для торгівлі
- Лут - набір різних предметів, який можуть отримати гравці після перемоги у битві
- Персонажі - ігрові створіння, що представляють гравців у грі. Кожен гравець має обрати на початку гри одного персонажа, кожен з яких мають різні передісторії, навички, характеристики, початкову кількість золота та вагу, яку вони можуть переносити. Важливою складовою кожного Персонажа є його характеристики, які використовуються як модифікатори при виконанні різних дій.
- Істота - ігрові створіння, які використовуються для бою.
- Вміння - закляття або навички істот, які використовуються у боях. Поділяються на захисні та атакувальні.
- Локації - певні місця у місті, в яких гравці можуть виконувати різні дії. (детальніше про кожну локацію читайте нижче)
- Артефакти - ігрові предмети, які використовуються для покращення характеристик Персонажа. Здобути можна шляхом - продажуу, купівлі, знаходження, відвоювання. Артефакти, які персонаж не використовує, але носить з собою займають вдвічі менше місця. Використовувати артефакти, що займають ті самі слоти не можна.
- Предмети - ігровий інвентар, який надає гравцям певних можливостей, або використовується для покращення характеристик Істот. Здобути можна шляхом - продажу, купівлі, знаходження, відвоювання.

### Карта

У світі Казки наявні наступні міста:

- Київ (універсальної стихії)
- Передпоріжжя (стихії Води)
- Прямий Ріг (стихії Вітру)
- Тарасо - Шевченківськ (стихії Світла)
- Черуків (стихії Темряви)
- Пшеномир (стихії Природи)
- Тигрів (стихії Вогню)
  У кожному місті наявні загальні локації. В парку кожного міста можна знайти загублені створіння, які відповідають стихії міста.

### Локації

Події гри відбуваються в місті, де наявні наступні локації: Ринок, Вежа, В'язниця, Парк, Університет, Східний двір, Таверна

- Ринок - локація, на якій гравці можуть купити або продати випадкові предмети за золото, або спробувати вкрасти їх. При відкритті Ринку генерується 20 випадкових товарів.
- Вежа - локація, на якій можна взяти випадковий квест, за виконання якого можна отримати винагороду.
- В'язниця - локація, в яку попадають гравці. Вийти з в'язниці можна заплативши 30 золота, або втекти (для цього треба пройти перевірку на Втечу за 10 золота).
- Парк - локація, де гравці можуть спробувати знайти загублених Істот. Кількість істот, на яку ви можете натрапити дорівнює кількості гравців мінус 1. Істоти завжди ворожо налаштовані. За перемогу над істотою ви можете взяти її до себе.
- Університет - локація, де гравці можуть вивчити нові вміння для своїх істот. При зверненні до університету гравець платить 35 золота. На вибір отримує 3 вміння, які він може спробувати вивчити. Щоб успішно вивчити вміння треба кинути кубік Д20 на інтелект. Кожне вміння має необхідний рівень інтелекту для його вивчення.
- Східний двір - локація, де можна зустріти ворогів, за перемогу над якими можна отримати нагороду.
- Таверна - локація, де можна зустріти інших гравців.

### Хід бою

Якщо гравець вступає в бій без істоти, або якщо в усіх істот гравця 0 здоров'я - то він відправляється у в'язницю.
Перед боєм гравці кидають кубік Д20 на приорітет, що визначатиме послідовність ходу. На початку бою Персонаж викликає одну зі своїх істот. Бій поділяється на раунди. За кожен раунд кожна з істот може обрати одне захисне або одне атакувальне вміння. Атакувальні вміння можна використовувати безліч разів. Кожне Захисне вміння можна використовувати один раз за бій. При виконанні Атакувального вміння якщо в істоти, що атакує показник Атаки менше або дорівнює показнику Захисту істоти, яку атакують - то для проведення успішного вміння гравець кидає кубік Д20 на точність. Вміння використано успішно, якщо випадає число більше ніж показник Захисту ворога. Бій завершується коли одна зі сторін втрачає здоров'я всіх істот. З бою можна втекти, кинувши кубік Д20 на Втечу. При поразці гравець потрапляє у в'язницю. Здоров'я істот після бою не відновлюється до максимума.

### Істоти

- Кожна істота має стихію, одну з (Природа, Вогонь, Вода, Вітер, Темрява, Світло).
- Для володіння істотою Персонаж повинен мати Камінь Душі
- Кожна істота має характеристики (Атака, Захист, Ціна, Вміння, Здоров'я, Рівень, Стихія)
- Кожна істота може використовувати вміння лише своєї стихії, або Загальної стихії
- Кожній істоті доступні вміння, які у неї є спочатку, або ті, що Персонаж вивчив в Університеті
- Істоти Темряви мають перевагу ввечері та вночі над істотами Світла.
- Істоти Світла мають перевагу зранку та вдень над істотами Темряви.
- Істоти Природи мають перевагу над істотами Вітру, Вітру над Водою, Води над Вогнем, Вогню над Природою.
- Перевага істоти дозволяє ігнорувати перевірку на точність при виконанні вмінь

### Ефекти й Механіки

При накладанні негативних ефектів на ворога, той має кинути Кубік Д20 на опір. Щоб уникнути негативного ефекту, має бути більше ніж показник Атаки істоти, що атакує.

Унікальні:

- Плавлення - негативний ефект, зменшує Захист істоти на 3. (Вогонь) (Унікальне)
- Прокляття - негативний ефект, за кожне прокляття на істоті вона отримує 3 шкоди за хід. (Темрява) (Унікальне)
- Розвіювання - негативний ефект, зняття позитивних ефектів. (Вітер) (Унікальне)
- Мовчання - негативний ефект, не дозволяє істоті використовувати Захисні закляття (Вода) (Унікальне)
- Лікування - позитивний ефект, відновлення здоров'я. (Природа) (Унікальне)
- Очищення - позитивний ефект, зняття негативних ефектів. (Світло) (Унікальне)

Спільні:

- Щит - позитивний ефект, не дозволяє істоті отримати більше ніж 8 шкоди за один раз. (Загальне)
- Засліплення - негативний ефект, зменшує Атаку істоти на 5. (Вогонь, Світло)
- Піднесення - негативний ефект, істота не може використовувати Ближні Атакувальні вміння (Вітер, Вода)
- Сповільнення - негативний ефект, зменшення шкоди, яку може нанести істота до мінімальної. (Природа, Темрява, Вода)
- Шок - негативний ефект, істота не може відновлювати здоров'я. (Вітер, Темрява)
- Просвітлення - позитивний ефект, який дозволяє наносити максимальну шкоду при виконанні атакувальних вмінь. (Природа, Світло)

### Можливі складні дії

- Сила - спроба виконати фізично важку дію
- Спритність - спроба виконати дію обережно/швидко
- Викрадення - спроба персонажа вкрасти
- Пошук - спроба знайти щось на місцевості, або в Парку
- Втеча - спроба втекти від
- Інтелект - спроба вивчити нове вміння
- Лікування - спроба відновлення здоров'я
- Харизма - спроба обманути, вмовити
- Точність - спроба влучити у ворога
- Приорітет - спроба отримати приорітет у битві
- Опір - спроба уникнути негативного ефекту ворога

Для вдалого виконання складної дії треба перейти відповідну перевірку й кинути кубік Д20. Характеристики Персонажа є модифікаторами при перевірці.

## Примітки

- Половина від непарних чисел завжди округлюється до меншого числа
- Порядок отримання шкоди/лікування => Шкода від атакувального вміння, лікування, шкода від ефектів.
